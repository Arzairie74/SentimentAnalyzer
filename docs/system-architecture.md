# System Architecture Diagram - Harassment Detection System

## High-Level System Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           HARASSMENT DETECTION SYSTEM                          │
│                              System Architecture                               │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                                CLIENT TIER                                     │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐             │
│  │   Web Browser   │    │   React App     │    │  Vite Dev       │             │
│  │                 │    │                 │    │  Server         │             │
│  │ • Chrome/Firefox│◄──►│ • TypeScript    │◄──►│                 │             │
│  │ • Safari/Edge   │    │ • Tailwind CSS  │    │ • Hot Reload    │             │
│  │ • Mobile Safari │    │ • React Router  │    │ • Asset Bundling│             │
│  └─────────────────┘    └─────────────────┘    └─────────────────┘             │
│                                   │                                             │
│                                   │                                             │
│  ┌─────────────────────────────────▼─────────────────────────────────┐         │
│  │                    PRESENTATION LAYER                             │         │
│  ├─────────────────────────────────────────────────────────────────────┤         │
│  │                                                                     │         │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ │         │
│  │  │   Login/    │  │  Dashboard  │  │   Reddit    │  │    Text     │ │         │
│  │  │  Register   │  │    Page     │  │  Analysis   │  │  Analysis   │ │         │
│  │  │    Pages    │  │             │  │    Page     │  │    Page     │ │         │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘ │         │
│  │                                                                     │         │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ │         │
│  │  │   History   │  │   Profile   │  │   Layout    │  │ Protected   │ │         │
│  │  │    Page     │  │    Page     │  │ Components  │  │   Routes    │ │         │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘ │         │
│  └─────────────────────────────────────────────────────────────────────┘         │
│                                   │                                             │
│                                   │                                             │
│  ┌─────────────────────────────────▼─────────────────────────────────┐         │
│  │                     BUSINESS LOGIC LAYER                          │         │
│  ├─────────────────────────────────────────────────────────────────────┤         │
│  │                                                                     │         │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ │         │
│  │  │    Auth     │  │ Harassment  │  │   Reddit    │  │    CSV      │ │         │
│  │  │  Context    │  │  Context    │  │  Scraper    │  │  Export     │ │         │
│  │  │             │  │             │  │             │  │  Utils      │ │         │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘ │         │
│  │                                                                     │         │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ │         │
│  │  │   OpenAI    │  │    D3.js    │  │  Supabase   │  │   Local     │ │         │
│  │  │ Integration │  │ Visualiz.   │  │   Client    │  │  Storage    │ │         │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘ │         │
│  └─────────────────────────────────────────────────────────────────────┘         │
└─────────────────────────────────────────────────────────────────────────────────┘
                                   │
                                   │ HTTPS/API Calls
                                   ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              EXTERNAL SERVICES                                 │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐             │
│  │   OpenAI API    │    │  Reddit JSON    │    │   Supabase      │             │
│  │                 │    │     API         │    │   Platform      │             │
│  │ • GPT-3.5-turbo │    │                 │    │                 │             │
│  │ • GPT-4 Models  │    │ • Public Posts  │    │ • Authentication│             │
│  │ • Chat Complet. │    │ • Comment Trees │    │ • Database      │             │
│  │ • Rate Limiting │    │ • JSON Format   │    │ • Row Level Sec.│             │
│  └─────────────────┘    └─────────────────┘    └─────────────────┘             │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
                                   │
                                   │ Database Queries
                                   ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                               DATA TIER                                        │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────┐ │
│  │                        SUPABASE DATABASE                                   │ │
│  ├─────────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                             │ │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                     │ │
│  │  │ auth.users  │    │  profiles   │    │ sentiment_  │                     │ │
│  │  │             │    │             │    │ analyses    │                     │ │
│  │  │ • id (PK)   │───►│ • id (FK)   │───►│ • id (PK)   │                     │ │
│  │  │ • email     │    │ • email     │    │ • user_id   │                     │ │
│  │  │ • password  │    │ • name      │    │ • type      │                     │ │
│  │  │ • metadata  │    │ • created_at│    │ • content   │                     │ │
│  │  └─────────────┘    │ • updated_at│    │ • url       │                     │ │
│  │                     └─────────────┘    │ • results   │                     │ │
│  │                                        │ • analysis  │                     │ │
│  │                                        │ • created_at│                     │ │
│  │                                        └─────────────┘                     │ │
│  │                                                                             │ │
│  │  ┌─────────────────────────────────────────────────────────────────────┐   │ │
│  │  │                    SECURITY FEATURES                               │   │ │
│  │  ├─────────────────────────────────────────────────────────────────────┤   │ │
│  │  │ • Row Level Security (RLS)                                         │   │ │
│  │  │ • JWT Authentication                                               │   │ │
│  │  │ • User Data Isolation                                              │   │ │
│  │  │ • Automatic Triggers                                               │   │ │
│  │  │ • Foreign Key Constraints                                          │   │ │
│  │  └─────────────────────────────────────────────────────────────────────┘   │ │
│  └─────────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Component Architecture Detail

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           COMPONENT ARCHITECTURE                               │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────┐ │
│  │                         REACT COMPONENT TREE                               │ │
│  ├─────────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                             │ │
│  │                              App.tsx                                       │ │
│  │                                 │                                           │ │
│  │                    ┌────────────┼────────────┐                             │ │
│  │                    │            │            │                             │ │
│  │              AuthProvider  HarassmentProvider  Router                      │ │
│  │                    │            │            │                             │ │
│  │                    └────────────┼────────────┘                             │ │
│  │                                 │                                           │ │
│  │                    ┌────────────┼────────────┐                             │ │
│  │                    │            │            │                             │ │
│  │               Login/Register   Layout    ProtectedRoute                    │ │
│  │                    │            │            │                             │ │
│  │                    │       ┌────┼────┐       │                             │ │
│  │                    │       │    │    │       │                             │ │
│  │                    │   Sidebar Navigation Header                           │ │
│  │                    │       │         │                                     │ │
│  │                    │       └─────────┼─────────┐                           │ │
│  │                    │                 │         │                           │ │
│  │                    └─────────────────┼─────────┘                           │ │
│  │                                      │                                     │ │
│  │              ┌───────────────────────┼───────────────────────┐             │ │
│  │              │                       │                       │             │ │
│  │         Dashboard              RedditAnalysis         TextAnalysis         │ │
│  │              │                       │                       │             │ │
│  │              │              ┌────────┼────────┐              │             │ │
│  │              │              │        │        │              │             │ │
│  │         WordCloud      SentimentChart │  History        Profile            │ │
│  │                                       │                                     │ │
│  │                                  CSV Export                                │ │
│  │                                                                             │ │
│  └─────────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Data Flow Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              DATA FLOW DIAGRAM                                 │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────┐                                                               │
│  │    User     │                                                               │
│  │   Input     │                                                               │
│  └─────────────┘                                                               │
│         │                                                                       │
│         ▼                                                                       │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                         │
│  │   Reddit    │    │    Text     │    │    User     │                         │
│  │     URL     │    │   Content   │    │ Interaction │                         │
│  └─────────────┘    └─────────────┘    └─────────────┘                         │
│         │                   │                   │                              │
│         ▼                   ▼                   ▼                              │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                         │
│  │   Reddit    │    │   OpenAI    │    │  Supabase   │                         │
│  │  Scraper    │    │ Processing  │    │   Client    │                         │
│  └─────────────┘    └─────────────┘    └─────────────┘                         │
│         │                   │                   │                              │
│         ▼                   ▼                   ▼                              │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                         │
│  │  Comments   │    │ Harassment  │    │ User Data   │                         │
│  │ Extraction  │    │ Analysis    │    │ Persistence │                         │
│  └─────────────┘    └─────────────┘    └─────────────┘                         │
│         │                   │                   │                              │
│         └───────────────────┼───────────────────┘                              │
│                             ▼                                                  │
│                    ┌─────────────┐                                             │
│                    │   Results   │                                             │
│                    │ Aggregation │                                             │
│                    └─────────────┘                                             │
│                             │                                                  │
│                             ▼                                                  │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                         │
│  │    UI       │    │    Data     │    │    CSV      │                         │
│  │ Rendering   │    │ Visualization│    │   Export    │                         │
│  └─────────────┘    └─────────────┘    └─────────────┘                         │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Security Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                            SECURITY ARCHITECTURE                               │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────┐ │
│  │                        AUTHENTICATION LAYER                                │ │
│  ├─────────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                             │ │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                     │ │
│  │  │   Supabase  │    │     JWT     │    │  Protected  │                     │ │
│  │  │    Auth     │───►│   Tokens    │───►│   Routes    │                     │ │
│  │  └─────────────┘    └─────────────┘    └─────────────┘                     │ │
│  │                                                                             │ │
│  └─────────────────────────────────────────────────────────────────────────────┘ │
│                                     │                                           │
│                                     ▼                                           │
│  ┌─────────────────────────────────────────────────────────────────────────────┐ │
│  │                        AUTHORIZATION LAYER                                 │ │
│  ├─────────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                             │ │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                     │ │
│  │  │     RLS     │    │    User     │    │    Data     │                     │ │
│  │  │  Policies   │───►│ Isolation   │───►│ Filtering   │                     │ │
│  │  └─────────────┘    └─────────────┘    └─────────────┘                     │ │
│  │                                                                             │ │
│  └─────────────────────────────────────────────────────────────────────────────┘ │
│                                     │                                           │
│                                     ▼                                           │
│  ┌─────────────────────────────────────────────────────────────────────────────┐ │
│  │                          DATA SECURITY                                     │ │
│  ├─────────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                             │ │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                     │ │
│  │  │ Encrypted   │    │  API Key    │    │   HTTPS     │                     │ │
│  │  │ Database    │    │ Management  │    │ Transport   │                     │ │
│  │  └─────────────┘    └─────────────┘    └─────────────┘                     │ │
│  │                                                                             │ │
│  └─────────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Deployment Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           DEPLOYMENT ARCHITECTURE                              │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────┐ │
│  │                            DEVELOPMENT                                      │ │
│  ├─────────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                             │ │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                     │ │
│  │  │    Local    │    │    Vite     │    │   Hot       │                     │ │
│  │  │ Development │───►│ Dev Server  │───►│  Reload     │                     │ │
│  │  │ Environment │    │ (Port 5173) │    │             │                     │ │
│  │  └─────────────┘    └─────────────┘    └─────────────┘                     │ │
│  │                                                                             │ │
│  └─────────────────────────────────────────────────────────────────────────────┘ │
│                                     │                                           │
│                                     ▼                                           │
│  ┌─────────────────────────────────────────────────────────────────────────────┐ │
│  │                             PRODUCTION                                     │ │
│  ├─────────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                             │ │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                     │ │
│  │  │    Build    │    │   Static    │    │     CDN     │                     │ │
│  │  │  Process    │───►│   Assets    │───►│ Distribution│                     │ │
│  │  │ (npm build) │    │   (HTML/JS) │    │  (Netlify)  │                     │ │
│  │  └─────────────┘    └─────────────┘    └─────────────┘                     │ │
│  │                                                                             │ │
│  └─────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────┐ │
│  │                        EXTERNAL DEPENDENCIES                               │ │
│  ├─────────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                             │ │
│  │  • OpenAI API (api.openai.com)                                             │ │
│  │  • Reddit JSON API (reddit.com)                                            │ │
│  │  • Supabase Platform (supabase.com)                                        │ │
│  │  • NPM Package Registry                                                    │ │
│  │                                                                             │ │
│  └─────────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Technology Stack Summary

### **Frontend Technologies**
- **React 18**: Component-based UI framework
- **TypeScript**: Type-safe JavaScript development
- **Tailwind CSS**: Utility-first CSS framework
- **React Router**: Client-side routing
- **Vite**: Fast build tool and dev server

### **Data Visualization**
- **D3.js**: Interactive charts and word clouds
- **Custom Components**: Sentiment charts and visualizations

### **External Integrations**
- **OpenAI API**: AI-powered harassment detection
- **Reddit JSON API**: Comment data scraping
- **Supabase**: Authentication and database services

### **Development Tools**
- **ESLint**: Code linting and quality
- **PostCSS**: CSS processing
- **Autoprefixer**: CSS vendor prefixes

### **Deployment**
- **Static Site Generation**: Pre-built HTML/CSS/JS
- **CDN Distribution**: Global content delivery
- **Environment Variables**: Configuration management